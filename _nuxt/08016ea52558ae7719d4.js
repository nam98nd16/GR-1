(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1019:function(e,t,r){var content=r(1035);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(130).default)("1dfa9ca2",content,!0,{sourceMap:!1})},1034:function(e,t,r){"use strict";var o=r(1019);r.n(o).a},1035:function(e,t,r){(t=r(129)(!1)).push([e.i,".container[data-v-ad6c3b1e]{min-height:100vh;justify-content:center;align-items:center}",""]),e.exports=t},1053:function(e,t,r){"use strict";r.r(t);r(131),r(53),r(52),r(104),r(32),r(76);var o=r(21),n=r(61),l=r(100),m=r(184),c=r.n(m);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={components:{},data:function(){return{formItemLayout:{labelCol:{md:8,sm:24},wrapperCol:{md:8,sm:24}},user:null,currentUser:null,loading:!1,pageLoading:!1}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"profile"})},mounted:function(){this.currentUser=c()(localStorage.getItem("token")),this.getProfile()},methods:d(d({},Object(l.b)({setUpdatedFullName:"profile/setUpdatedFullName"})),{},{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r||(t.loading=!0,t.$fireStore.collection("users").doc(t.currentUser.user_id).set({fullName:o.fullName,phoneNumber:o.phoneNumber?o.phoneNumber:"",birthday:o.birthday?t.$moment(o.birthday).format("YYYY-MM-DD"):"",gender:o.gender,about:o.about?o.about:""}).then((function(){t.$notification.success({message:"Update successfully!"}),t.setUpdatedFullName(o.fullName)})).catch((function(e){t.$notification.error({message:e.message})})).finally((function(){t.loading=!1})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())},getProfile:function(){var e=this;this.pageLoading=!0,this.$fireStore.collection("users").doc(this.currentUser.user_id).get().then((function(t){if(t.exists)for(var r in e.user=t.data(),e.user)e.form.setFieldsValue(Object(n.a)({},r,"birthday"==r&&e.$moment(e.user[r]).isValid()?e.$moment(e.user[r]):e.user[r]));else console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)})).finally((function(){e.pageLoading=!1}))}})},v=(r(1034),r(39)),component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-spin",{attrs:{spinning:e.pageLoading}},[r("div",{staticClass:"container"},[r("a-form",{staticClass:"login-form",staticStyle:{"margin-top":"50px"},attrs:{form:e.form},on:{submit:e.handleSubmit}},[r("a-form-item",e._b({attrs:{label:"Email"}},"a-form-item",e.formItemLayout,!1),[r("a-input",{attrs:{disabled:"",value:e.currentUser?e.currentUser.email:"",placeholder:"Email"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),e._v(" "),r("a-form-item",e._b({attrs:{label:"Full name"}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fullName",{rules:[{required:!0,message:"Please input your full name!"}]}],expression:"[\n        'fullName',\n        { rules: [{ required: true, message: 'Please input your full name!' }] },\n      ]"}],attrs:{placeholder:"Full name"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),e._v(" "),r("a-form-item",e._b({attrs:{label:"Phone number"}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phoneNumber",{rules:[{pattern:/^(0|[1-9][0-9]*)$/,message:"Please input a valid phone number!"}]}],expression:"[\n        'phoneNumber',\n        { rules: [{ pattern: /^(0|[1-9][0-9]*)$/, message: 'Please input a valid phone number!' }] },\n      ]"}],attrs:{placeholder:"Phone number"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mobile"},slot:"prefix"})],1)],1),e._v(" "),r("a-form-item",e._b({attrs:{label:"Birthday"}},"a-form-item",e.formItemLayout,!1),[r("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["birthday"],expression:"['birthday']"}],attrs:{format:"YYYY-MM-DD"}})],1),e._v(" "),r("a-form-item",e._b({attrs:{label:"Gender"}},"a-form-item",e.formItemLayout,!1),[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["gender",{initialValue:1}],expression:"['gender', {initialValue:1}]"}],attrs:{name:"gender"}},[r("a-radio",{attrs:{value:1}},[e._v("Male")]),e._v(" "),r("a-radio",{attrs:{value:2}},[e._v("Female")]),e._v(" "),r("a-radio",{attrs:{value:3}},[e._v("Other")])],1)],1),e._v(" "),r("a-form-item",e._b({attrs:{label:"About me"}},"a-form-item",e.formItemLayout,!1),[r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["about"],expression:"['about']"}],attrs:{autosize:{minRows:2,maxRows:10}}})],1),e._v(" "),r("a-form-item",e._b({attrs:{label:"  ",colon:!1}},"a-form-item",e.formItemLayout,!1),[r("a-button",{staticClass:"login-form-button",attrs:{loading:e.loading,type:"primary","html-type":"submit"}},[e._v("Update")])],1)],1)],1)])}),[],!1,null,"ad6c3b1e",null);t.default=component.exports}}]);