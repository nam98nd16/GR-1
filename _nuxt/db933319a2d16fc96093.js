(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1046:function(e,t,n){"use strict";n.r(t);n(76);var r=n(21),l=(n(32),{data:function(){return{formItemLayout:{labelCol:{md:4,sm:24},wrapperCol:{md:20,sm:24}},pageLoading:!1,programmingSkills:[],activeKey:["1"],visible:!1,skillTitle:"",selectedExperiences:{},experienceOptions:[],selectedLevels:{},levelOptions:[],submitting:!1,submittedRecords:null,assessmentRecordsRef:null}},mounted:function(){this.getEvtSkills(),this.retrieveAssessmentRecord()},methods:{getEvtSkills:function(){var e=this;this.pageLoading=!0,this.$fireStore.collection("skills").where("id","in",this.$route.params.evt.skillIds).get().then((function(col){col.forEach((function(t){var n=t.data();"Programming Skill"==n.type&&e.programmingSkills.push(n)}))})).catch((function(e){console.log("Error getting collection:",e)})).finally((function(){e.pageLoading=!1}))},retrieveAssessmentRecord:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assessmentRecordsRef=e.$fireStore.collection("assessment_records"),t.next=3,e.assessmentRecordsRef.where("creatorId","==",e.$fireAuth.currentUser.uid).where("assessmentEventId","==",e.$route.params.evt.id).get();case 3:e.submittedRecords=t.sent,e.submittedRecords.empty||(n=e.submittedRecords.docs[0].data(),e.selectedExperiences=n.selectedExperiences,e.selectedLevels=n.selectedLevels);case 5:case"end":return t.stop()}}),t)})))()},openAssessModal:function(e){this.skillTitle=e.title,e.assessmentMetrics.experiences&&(this.experienceOptions=e.assessmentMetrics.experiences),e.assessmentMetrics.levels&&(this.levelOptions=e.assessmentMetrics.levels),this.visible=!0},handleOk:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:_.isEmpty(e.selectedExperiences)&&_.isEmpty(e.selectedLevels)?e.visible=!1:(e.submitting=!0,(n=e.submittedRecords.empty?e.assessmentRecordsRef.doc():e.assessmentRecordsRef.doc(e.submittedRecords.docs[0].id)).set({id:n.id,assessmentEventId:e.$route.params.evt.id,creatorId:e.$fireAuth.currentUser.uid,selectedLevels:e.selectedLevels,selectedExperiences:e.selectedExperiences}).then((function(){e.$notification.success({message:"Assessment record updated successfully!"})})).catch((function(t){e.$notification.success({message:"Error updating assessment record!"})})).finally((function(){e.submitting=!1,e.visible=!1})));case 1:case"end":return t.stop()}}),t)})))()},handleCancel:function(){this.visible=!1},handleExperienceSelection:function(e){this.$set(this.selectedExperiences,this.skillTitle,e.target.value)},handleLevelSelection:function(e){this.$set(this.selectedLevels,this.skillTitle,e.target.value)}}}),o=n(39),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-collapse",{model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[n("a-collapse-panel",{key:"1",attrs:{header:"Programming Skills"}},[n("a-list",{staticClass:"demo-loadmore-list",attrs:{"item-layout":"horizontal","data-source":e.programmingSkills},scopedSlots:e._u([{key:"renderItem",fn:function(t,r){return n("a-list-item",{},[n("a-button",{attrs:{slot:"actions",type:"primary"},on:{click:function(n){return e.openAssessModal(t)}},slot:"actions"},[e._v("Assess")]),e._v(" "),n("a-list-item-meta",{attrs:{description:t.description}},[n("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])],1)}}])})],1),e._v(" "),n("a-collapse-panel",{key:"2",attrs:{header:"Soft Skills"}}),e._v(" "),n("a-collapse-panel",{key:"3",attrs:{header:"Project Management Skills"}})],1),e._v(" "),n("a-modal",{attrs:{title:e.skillTitle,visible:e.visible,centered:!0,width:800,okButtonProps:{props:{loading:e.submitting}}},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-form",[n("a-form-item",e._b({attrs:{label:"Experience"}},"a-form-item",e.formItemLayout,!1),[n("a-radio-group",{attrs:{value:e.selectedExperiences[e.skillTitle]},on:{change:e.handleExperienceSelection}},e._l(e.experienceOptions,(function(t){return n("a-radio",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),e._v(" "),n("a-form-item",e._b({attrs:{label:"Level"}},"a-form-item",e.formItemLayout,!1),[n("a-radio-group",{attrs:{value:e.selectedLevels[e.skillTitle]},on:{change:e.handleLevelSelection}},e._l(e.levelOptions,(function(t){return n("a-radio",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);